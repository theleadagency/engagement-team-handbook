

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Builds - TLA Dev Handbook</title>
    <meta name="description" content="A handbook for defining the processes, best practices and culture of The Lead Agency Development squads.">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Builds - TLA Dev Handbook">
    <meta property="og:description" content="A handbook for defining the processes, best practices and culture of The Lead Agency Development squads.">
    <meta property="og:image" content="https://https://theleadagency.github.io/engagement-team-handbook/images/logo.png") ">

    <link rel="apple-touch-icon" sizes="180x180" href="/engagement-team-handbook/images/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/engagement-team-handbook/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/engagement-team-handbook/images/icons/favicon-16x16.png">
    <link rel="manifest" href="/engagement-team-handbook/site.webmanifest">
    <link rel="mask-icon" href="/engagement-team-handbook/images/icon/safari-pinned-tab.svg" color="#ee1c3a">
    <meta name="apple-mobile-web-app-title" content="TLA Dev Handbook">
    <meta name="application-name" content="TLA Dev Handbook">
    <meta name="msapplication-TileColor" content="#ee1c3a">
    <meta name="theme-color" content="#ffffff">

    <!-- main page styles -->
    <link rel="stylesheet" href="/engagement-team-handbook/css/page.css">

    <!-- this needs to be loaded before guide's inline scripts -->
    <script>window.PAGE_TYPE = "best-practices"</script>

  </head>
  <body class="docs">
    <div id="mobile-bar" >
      <a class="menu-button"></a>
      <a class="logo" href="/engagement-team-handbook/"></a>
    </div>
    <div id="header">
  <a id="logo" href="/engagement-team-handbook/">
    <img src="/engagement-team-handbook/images/logo.png">
    <span>TLA Dev Handbook</span>
  </a>
  <ul id="nav">
    <li>
  <a href="/engagement-team-handbook/about/index.html" class="nav-link">About</a>
</li>
<li>
  <a href="/engagement-team-handbook/process/index.html" class="nav-link">Process</a>
</li>
<li>
  <a href="/engagement-team-handbook/best-practices/index.html" class="nav-link">Best Practices</a>
</li>
  </ul>
</div>

    
      <div id="main" class="fix-sidebar">
        
          
  <div class="sidebar">
  <div class="sidebar-inner">
    <ul class="main-menu">
      <li>
  <a href="/engagement-team-handbook/about/index.html" class="nav-link">About</a>
</li>
<li>
  <a href="/engagement-team-handbook/process/index.html" class="nav-link">Process</a>
</li>
<li>
  <a href="/engagement-team-handbook/best-practices/index.html" class="nav-link">Best Practices</a>
</li>
    </ul>
    <div class="list">
      
        <ul class="menu-root">
  
    
    
    
      
      
      
    
    <li>
      <a href="/engagement-team-handbook/best-practices/index.html" class="sidebar-link">Introduction</a>
    </li>
  
    
    
    
      
      
      
    
    <li>
      <a href="/engagement-team-handbook/best-practices/clean-code.html" class="sidebar-link">Clean Code</a>
    </li>
  
    
    
    
      
        <li><h3>Server Side</h3></li>
      
      
      
    
    <li>
      <a href="/engagement-team-handbook/best-practices/c-sharp.html" class="sidebar-link">C#</a>
    </li>
  
    
    
    
      
      
      
    
    <li>
      <a href="/engagement-team-handbook/best-practices/umbraco.html" class="sidebar-link">Umbraco</a>
    </li>
  
    
    
    
      
      
        <li><h3>Front End</h3></li>
      
      
    
    <li>
      <a href="/engagement-team-handbook/best-practices/html.html" class="sidebar-link">Markup</a>
    </li>
  
    
    
    
      
      
      
    
    <li>
      <a href="/engagement-team-handbook/best-practices/scripts.html" class="sidebar-link">Scripts</a>
    </li>
  
    
    
    
      
      
      
    
    <li>
      <a href="/engagement-team-handbook/best-practices/styles.html" class="sidebar-link">Styles</a>
    </li>
  
    
    
    
      
      
      
    
    <li>
      <a href="/engagement-team-handbook/best-practices/builds.html" class="sidebar-link current">Builds</a>
    </li>
  
    
    
    
      
      
      
        <li><h3>Devops</h3></li>
      
    
    <li>
      <a href="/engagement-team-handbook/best-practices/infrastructure.html" class="sidebar-link">Infrastructure</a>
    </li>
  
</ul>

      
    </div>
  </div>
</div>

<div class="content best-practices with-sidebar ">
  
    
  
  
    <h1>Builds</h1>
  
    <h2 id="In-General"><a href="#In-General" class="headerlink" title="In General"></a>In General</h2><ul>
<li>One build per project</li>
<li>Always use continuous integration (CI)</li>
<li>Where possible, keep environment config away from build config</li>
</ul>
<h3 id="CI"><a href="#CI" class="headerlink" title="CI"></a>CI</h3><p>Every project should have a single build pipeline triggered by a change in source control to a branch (any branch).</p>
<h3 id="One-build"><a href="#One-build" class="headerlink" title="One build"></a>One build</h3><p> There should no longer be a concept of a feature build and a master build anymore. The reason being is, if something new in the next build causes the build to break - how do we deal with that? The master branch could have triggered that build, by which point: code has been approved. To avoid this happening, we have one build to rule them all. If it fails after a change to a feature branch, if can’t get past a code review and we know it’s going to be the same behavior everywhere else.</p>
<h3 id="Environment-vs-Build"><a href="#Environment-vs-Build" class="headerlink" title="Environment vs Build"></a>Environment vs Build</h3><p>There needs to be a clear distinction between build variables &amp; environment variables. This distinction isn’t helped by ASP.NET’s ubiquitous <code>web.config</code>. So how do we define the two?</p>
<p>Generally, it’s going to be an environment variable. This includes all app settings and connection strings:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appSettings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">add</span> <span class="attr">key</span>=<span class="string">"this-is-an-environment-var"</span> <span class="attr">value</span>=<span class="string">"Hello"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appSettings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">connectionStrings</span> <span class="attr">configSource</span>=<span class="string">"connectionString.config"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The config in the above is special as it can easily be changed in the deployment phase. VSTS will match VSTS variables to the keys in your config automatically.</p>
<p>If you need to do something outside of the above, then this will likely need to be done in the build. This has major downsides as it is a lot more complicated, so bear that in a mind.</p>
<h2 id="Front-End"><a href="#Front-End" class="headerlink" title="Front End"></a>Front End</h2><h3 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h3><h3 id="Gulp"><a href="#Gulp" class="headerlink" title="Gulp"></a>Gulp</h3><p class="tip">We’re beginning to drop Gulp in favour of Webpack</p>
  
  <div class="footer">
    Caught a mistake or want to contribute to the documentation?
    <a rel="noopener" href="https://github.com/theleadagency/engagement-team-handbook/blob/master/src/best-practices/builds.md" target="_blank">
      Edit this page on GitHub!
    </a>
  </div>
</div>

        
      </div>
      <script src="/engagement-team-handbook/js/smooth-scroll.min.js"></script>
    

    <!-- main custom script for sidebars, version selects etc. -->
    <script src="/engagement-team-handbook/js/css.escape.js"></script>
    <script src="/engagement-team-handbook/js/common.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/regular.css" integrity="sha384-EWu6DiBz01XlR6XGsVuabDMbDN6RT8cwNoY+3tIH+6pUCfaNldJYJQfQlbEIWLyA" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/fontawesome.css" integrity="sha384-GVa9GOgVQgOk+TNYXu7S/InPTfSDTtBalSgkgqQ7sCik56N9ztlkoTr2f/T44oKV" crossorigin="anonymous">
  </body>
</html>